    <!-- NAV HORIZONTAL -->
  <div class="container-principal">

    <!-- Opciones: Buscar - Agregar -->
    <div class="d-flex justify-content-around align-items-center px-3 py-2 container-opciones">
      <!-- Buscador -->
      <div class="container-buscador">
        <input type="text" class="form-control" placeholder="Buscar" name="filterPost" [(ngModel)]="filterPost">
      </div>
      <!-- Boton Agregar -->
      <div class="container-agregar">
        <button class="btn btn-secondary" (click)="showModalAgregar(modalAgregarUsuario)">Agregar Usuario</button>
      </div>

    </div>

    <!-- Lista de Usuarios -->
    <div class="container-lista">
   
      <ul class="list-group p-0" style="border: none;">
              <!-- Titulo Principal -->
        <li class="list-group-item d-flex justify-content-between">
          <h3 class="mx-2 mb-0">Usuarios</h3>
        </li>        
        <!-- Titulos -->
        <li class="list-group-item">
          <div class="row mx-0 d-flex align-items-center">
            <div class="col-1 col-sm-1 col-md-1 col-lg-1">#</div>
            <div class="col-3 col-sm-3 col-md-3 col-lg-2">CI</div>
            <!-- Nombre y Apellido Usuario DESKTOP-->
            <div class="opciones-desktop col-3 col-sm-3 col-md-2 col-lg-2">Nombre</div>
            <div class="opciones-desktop col-3 col-sm-3 col-md-2 col-lg-2">Apellidos</div>
            <!-- Nombre y Apellido Usuario MOVIL-->
            <div class="opciones-movil col-5 col-sm-5 col-md-2 col-lg-2">Nombres</div>
            <div class="col-2 col-sm-2 col-md-4 col-lg-5 text-center">Op</div>
          </div>
        </li>
        <!-- LISTA USUARIOS -->
        <li class="list-group-item" *ngFor="let usu of usuarios | paginate: { itemsPerPage: itemsPerPage, currentPage: page } | filter:filterPost: ['nom_usu', 'ap_usu', 'ci_usuario']; let i = index">
          <div class="row mx-0 d-flex align-items-center">
            <!-- # -->
            <div class="col-1 col-sm-1 col-md-1 col-lg-1 ">{{i+1}}</div>
            <!-- CI Usuario -->
            <div class="col-3 col-sm-3 col-md-3 col-lg-2" style="color: #d4da8f">{{usu.ci_usuario}}</div>
            <!-- Nombre Usuario DESKTOP-->
            <div class="opciones-desktop col-3 col-sm-3 col-md-2 col-lg-2">{{usu.nom_usu}}</div>
            <!-- Apellido Usuario DESKTOP-->
            <div class="opciones-desktop col-3 col-sm-3 col-md-2 col-lg-2">{{usu.ap_usu}}</div>

            <!-- Nombre Apellido Usuario MOVIL -->
            <div class="opciones-movil col-5 col-sm-5 col-md-2 col-lg-2">{{usu.nom_usu}} {{usu.ap_usu}}</div>

            <!-- Opciones -->
            <div class="col-2 col-sm-2 col-md-4 col-lg-5 p-0 d-flex justify-content-evenly container-btn">

              <div class="opciones-desktop">
                <button class="btn p-0" title="Modificar usuario" (click)="showModalModificar(usu)"> <span class="px-0"><img src="../assets/images/icons/icon-options/editar.png"></span></button>
                <button class="btn p-0" title="Eliminar usuario" (click)="showModalEliminar(modalAgregarUsuario,usu.ci_usuario,usu.nom_usu)"> <span class="px-0"><img src="../assets/images/icons/icon-options/eliminar.png"></span></button>
                <button class="btn p-0" title="Agregar roles" (click)="showModalRolesUsuario(modalRolesUsuario, usu.ci_usuario)"> <span class="px-0"><img src="../assets/images/icons/icon-options/addrol.png"></span></button>
                <button class="btn p-0" title="Restablecer contraseña" (click)="enviarSolicitudRecuperacion(usu)"> <span class="px-0"><img src="../assets/images/icons/icon-options/recuperar.png"></span></button>
              </div>

              <div class="opciones-movil">
                <div ngbDropdown class="d-inline-block">

                  <!-- Botón que abre el menú -->
                  <button class="btn"
                          id="dropdownOpciones"
                          ngbDropdownToggle
                          style="background: #f3f3f3; margin-left: 10px; padding: 0px; width: 30px; height: 29px;">
                  </button>
              
                  <!-- Menú desplegable -->
                  <div ngbDropdownMenu aria-labelledby="dropdownOpciones" style="min-width: 190px; background: #3c4a64; color: #fff; font-size: 17px; letter-spacing: 1px;">
              
                    <div class="dropdown-item-opcion" (click)="showModalModificar(usu)">
                      Modificar usuario
                    </div>
              
                    <div class="dropdown-item-opcion" (click)="showModalEliminar(modalAgregarUsuario, usu.ci_usuario, usu.nom_usu)">
                      Eliminar usuario
                    </div>
              
                    <div class="dropdown-item-opcion" (click)="showModalRolesUsuario(modalRolesUsuario, usu.ci_usuario)">
                      Agregar roles
                    </div>
              
                    <div class="dropdown-item-opcion" (click)="enviarSolicitudRecuperacion(usu)">
                      Restablecer contraseña
                    </div>
              
                  </div>
              
                </div>
                
              </div>

            </div>
          </div>
        </li>
        <li class="list-group-item custom-pagination pt-2 d-flex justify-content-between">
          <!-- Controles de paginación -->
          <pagination-controls 
          (pageChange)="page = $event" 
          previousLabel="Anterior" 
          nextLabel="Siguiente"   
          [responsive]="true"      
          style="text-align: center;">
         </pagination-controls>
        </li>
      </ul>
      
    </div>

  </div>

     
<!-- ****************************** MENSAJE TOAST ***************************************** -->
<div class="toast" id="toast" role="alert" aria-live="assertive" aria-atomic="true">

  <div id="toast-body" class="toast-body">
    <span class="px-2" *ngIf="toast_tipo == 1"><img src="../assets/images/icons/icon-options/correcto.png"></span> 
    <span class="px-2" *ngIf="toast_tipo == 2"><img src="../assets/images/icons/icon-options/error.png"></span> 
    <span>{{mensaje_toast}}</span>
  </div>
</div>


<!-- ****************************** MODAL AGREGAR NUEVO USUARIO *****************************************  -->
<div #modalAgregarUsuario id="modalAgregarUsuario" class="modal fade" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true" (hidden.bs.modal)="resetForm()">
  <div class="modal-dialog modal-dialog-centered d-flex justify-content-center modal-lg-custom">
    <div class="modal-content content-modal">
      <div class="modal-header">
        <h1 class="modal-title fs-4" id="exampleModalLabel">Nuevo Usuario</h1>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>

      <div class="modal-body">
        <form #formUsuario="ngForm" class="row g-3" (ngSubmit)="AgregarUsuario()">
          <!-- CEDULA DE IDENTTIDAD -->
          <div class="mb-1 mt-0">
            <label class="form-label">CI</label>
            <input type="text" #ci_usuario="ngModel" [(ngModel)]="user.ci_usuario" name="ci_usuario" class="form-control" placeholder="Cedula de Identidad" required inputmode="numeric" pattern="[0-9]*" minlength="4" maxlength="10">
            <div class="advertencias" *ngIf="mostrarAdvertencias && user.ci_usuario.length==0">
              <img src="../assets/images/icons/icon-options/advertencia.png" style="width: 20px; margin-right: 8px;">
              <p class="m-0">CI Invalido</p>
            </div>
            <div class="advertencias" *ngIf="mostrarAdvertencias && !ci_usuario.valid">
              <img src="../assets/images/icons/icon-options/advertencia.png" style="width: 20px; margin-right: 8px;">
              <p class="m-0">CI debe ser numerico y mayor a 3</p>
            </div>                    
          </div>
          <!-- NOMBRE USUARIO -->
          <div class="mb-1 mt-0">
            <label class="form-label">Nombre</label>
            <input type="text" #nom_usu="ngModel" [(ngModel)]="user.nom_usu" name="nom_usu" class="form-control" placeholder="Nombre" required pattern="[a-zA-Z ]+">
            <div class="advertencias" *ngIf="mostrarAdvertencias && user.nom_usu.length == 0">
              <img src="../assets/images/icons/icon-options/advertencia.png" style="width: 20px; margin-right: 8px;">
              <p class="m-0">Nombre Invalido</p>
            </div>   
          </div>
          <!-- APELLIDO USUARIO -->
          <div class="mb-1 mt-0">
            <label class="form-label">Apellidos</label>
            <input type="text" #ap_usu="ngModel" [(ngModel)]="user.ap_usu" name="ap_usu" class="form-control" placeholder="Apellidos" pattern="[a-zA-Z ]+">
            <div class="advertencias" *ngIf="mostrarAdvertencias && user.ap_usu.length == 0">
              <img src="../assets/images/icons/icon-options/advertencia.png" style="width: 20px; margin-right: 8px;">
              <p class="m-0">Apellido Invalido</p>
            </div>   
          </div>
          <!-- CONTRASEÑA -->
          <div class="mb-1 mt-0">
            <label class="form-label">Contraseña</label>
            <input type="password" #clave="ngModel" [(ngModel)]="user.clave" name="clave" class="form-control" placeholder="Contraseña..." required minlength="4">

            <div class="advertencias" *ngIf="mostrarAdvertencias && user.clave.length == 0">
              <img src="../assets/images/icons/icon-options/advertencia.png" style="width: 20px; margin-right: 8px;">
              <p class="m-0">Insertar Contraseña</p>
            </div>   
            <div class="advertencias" *ngIf="mostrarAdvertencias && user.clave.length<=3 && user.clave.length!=0">
              <img src="../assets/images/icons/icon-options/advertencia.png" style="width: 20px; margin-right: 8px;">
              <p class="m-0">La contraseña debe tener mas de 3 caracteres</p>
            </div>   
          </div>
          <!-- SELECCIONAR CARGO -->
          <div class="mb-0 mt-0">
            <label class="form-label">Cargo</label>
            <select class="custom-select" #cargo="ngModel" [(ngModel)]="user.cargo" name="cargo" required>
              <option value=0>Administrador</option>
              <option value=1>Cajero</option>
              <option value=2>Cocinero</option>
            </select>
          </div>
          <div class="modal-footer btn-principal">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
            <button type="submit" class="btn btn-secondary" style="background: #006bb0;">Agregar</button>
          </div>
        </form>
      </div>

    </div>
  </div>
</div>


<!-- ****************************** MODAL MODIFICAR USUARIO *****************************************  -->
<div #modalModificarUsuario id="modalModificarUsuario" class="modal fade" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered d-flex justify-content-center modal-lg-custom">
    <div class="modal-content content-modal">
      <div class="modal-header">
        <h1 class="modal-title fs-5" id="exampleModalLabel">Modificar Usuario</h1>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">

        <form #formUsuarioMod="ngForm" class="row g-3" (ngSubmit)="ModificarUsuario()">
          <!-- NOMBRE -->
          <div class="mb-1">
            <label class="form-label">Nombre:</label>
            <input type="text" #nom_usuM="ngModel" [(ngModel)]="user.nom_usu" name="nom_usu" class="form-control" placeholder="Nombre" required pattern="[a-zA-Z ]+" value="{{this.user.nom_usu}}">
            <div class="advertencias" *ngIf="mostrarAdvertencias && user.nom_usu.length == 0">
              <img src="../assets/images/icons/icon-options/advertencia.png" style="width: 20px; margin-right: 8px;">
              <p class="m-0">Nombre Invalido</p>
            </div>     
          </div>
          <!-- APELLIDO -->
          <div class="mb-1">
            <label class="form-label">Apellidos:</label>
            <input type="text" #ap_usuM="ngModel" [(ngModel)]="user.ap_usu" name="ap_usu" class="form-control" placeholder="Apellidos" pattern="[a-zA-Z ]+" value="{{this.user.ap_usu}}">
            <div class="advertencias" *ngIf="mostrarAdvertencias && user.ap_usu.length == 0">
              <img src="../assets/images/icons/icon-options/advertencia.png" style="width: 20px; margin-right: 8px;">
              <p class="m-0">Apellido Invalido</p>
            </div>  
          </div>
          <!-- SELECCIONAR CARGO -->
          <div class="mb-0 mt-0">
            <label class="form-label">Cargo</label>
            <select class="custom-select" #cargo="ngModel" [(ngModel)]="user.cargo" name="cargo">
              <option value=0>Administrador</option>
              <option value=1>Cajero</option>
              <option value=2>Cocinero</option>
            </select>
          </div>

          <div class="modal-footer btn-principal">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
            <button type="submit" class="btn btn-secondary" style="background: #006bb0;">Modificar</button>
          </div>

        </form>
      </div>
    </div>
  </div>
</div>


<!-- ****************************** MODAL DELETE USUARIO ***************************************** -->
<div #modalEliminarUsuario id="modalEliminarUsuario" class="modal" tabindex="-1">
  <div class="modal-dialog modal-dialog-centered d-flex justify-content-center modal-lg-custom">
    <div class="modal-content content-modal">
      <div class="modal-header">
        <h4 class="modal-title ">Eliminar Usuario {{nom_user}}</h4>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <!-- <div class="modal-body">
        <p class="m-0 py-2">Esta seguro de Eliminar a "<strong>{{nom_user}}</strong>"</p>
      </div> -->
      <div class="modal-footer btn-principal">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
        <button type="button" class="btn btn-danger" (click)="EliminarUsuario()" style="background: #006bb0;">Eliminar</button>
      </div>
    </div>
  </div>
</div>

<!-- ****************************** MODAL AGREGAR ROLES A USUARIO *****************************************  -->
<div #modalRolesUsuario id="modalRolesUsuario" class="modal fade" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered d-flex justify-content-center modal-lg-custom">
    <div class="modal-content content-modal">
      <div class="modal-header">
        <h1 class="modal-title fs-5" id="exampleModalLabel">Agregar Roles</h1>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">

        <form class="row g-3" (ngSubmit)="AgregarRolesUsuario()">
          <!-- USUARIOS -->
          <div class="form-check">
            <input class="form-check-input" type="checkbox" value="" [(ngModel)]="administrarUsuarios" name="administrarUsuarios" id="administrarUsuarios">
            <label class="form-check-label" for="flexCheckDefault">
              Gestión Usuarios
            </label>
          </div>
          <!-- PRODUCTOS -->
          <div class="form-check">
            <input class="form-check-input" type="checkbox" value="" [(ngModel)]="administrarProductos" name="administrarProductos" id="administrarProductos">
            <label class="form-check-label" for="flexCheckChecked">
              Gestión Productos
            </label>
          </div>
          <!-- VENTAS -->
          <div class="form-check">
            <input class="form-check-input" type="checkbox" value="" [(ngModel)]="gestionarVentas" name="gestionarVentas" id="gestionarVentas">
            <label class="form-check-label" for="flexCheckChecked">
              Gestión Ventas
            </label>
          </div>
          <!-- CAJA -->
          <div class="form-check">
            <input class="form-check-input" type="checkbox" value="" [(ngModel)]="gestionarCaja" name="gestionarCaja" id="gestionarCaja">
            <label class="form-check-label" for="flexCheckChecked">
              Gestión Caja
            </label>
          </div>
          <!-- COCINA -->
          <div class="form-check">
            <input class="form-check-input" type="checkbox" value="" [(ngModel)]="gestionarCocina" name="gestionarCocina" id="gestionarCocina">
            <label class="form-check-label" for="flexCheckChecked">
              Gestión Cocina
            </label>
          </div>
          <!-- INVENTARIO -->
          <div class="form-check">
            <input class="form-check-input" type="checkbox" value="" [(ngModel)]="gestionarInventario" name="gestionarInventario" id="gestionarInventario">
            <label class="form-check-label" for="flexCheckChecked">
              Gestión Inventario
            </label>
          </div>
          <!-- CLIENTES -->
          <div class="form-check">
            <input class="form-check-input" type="checkbox" value="" [(ngModel)]="gestionarClientes" name="gestionarClientes" id="gestionarClientes">
            <label class="form-check-label" for="flexCheckChecked">
              Gestión Clientes
            </label>
          </div>
          <!-- REPORTE DE VENTAS -->
          <div class="form-check">
            <input class="form-check-input" type="checkbox" value="" [(ngModel)]="gestionarReporteVentas" name="gestionarReporteVentas" id="gestionarReporteVentas">
            <label class="form-check-label" for="flexCheckChecked">
              Gestión Reporte de Ventas
            </label>
          </div>

          <div class="modal-footer btn-principal">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
            <button type="button" class="btn btn-success" (click)="AgregarRolesUsuario()" style="background: #006bb0;">Guardar</button>
          </div>
        </form>

      </div>
    </div>
  </div>
</div>



<!-- ****************************** MODAL RECUPERAR CONTRASEÑA *****************************************  -->
<!-- <div id="modalRecuperarContrasena" class="modal fade" tabindex="-1">
  <div class="modal-dialog modal-lg-custom">
      <div class="modal-content content-modal">
          <div class="modal-header">
              <h5 class="modal-title">Recuperar Contraseña</h5>
              <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
          </div>
          <div class="modal-body">
              <form>
                  <div class="mb-3">
                      <label for="ciUsuario" class="form-label">Número de Cédula</label>
                      <input type="text" id="ciUsuario" class="form-control" [(ngModel)]="resetCiUsuario" name="ciUsuario" required>
                      <div *ngIf="mostrarAdvertencia" class="text-danger">El campo es obligatorio</div>
                      
                  </div>
                  <button type="submit" class="btn btn-primary">Enviar</button>
              </form>
          </div>
      </div>
  </div>
</div> -->

<!-- ****************************** MODAL RESTABLECER CONTRASEÑA *****************************************  -->
<div #modalRestablecerContrasena id="modalRestablecerContrasena" class="modal fade" tabindex="-1" (hidden.bs.modal)="resetFormContra()">
  <div class="modal-dialog modal-dialog-centered d-flex justify-content-center modal-lg-custom">
      <div class="modal-content content-modal">
          <div class="modal-header">
              <h5 class="modal-title">Restablecer Contraseña</h5>
              <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
          </div>
          <div class="modal-body">
              <form >
                  <div class="mb-3">
                      <label for="newPassword" class="form-label">Nueva Contraseña</label>
                      <input type="password" id="newPassword" class="form-control" [(ngModel)]="newPassword" name="newPassword">

                      <div class="advertencias" *ngIf="mostrarAdvertencia && newPassword.length<=3">
                        <img src="../assets/images/icons/icon-options/advertencia.png" style="width: 20px; margin-right: 8px;">
                        <p class="m-0">La contraseña debe tener mas de 3 caracteres</p>
                      </div>   
                  </div>
                  <div class="mb-3">
                      <label for="confirmPassword" class="form-label">Confirmar Contraseña</label>
                      <input type="password" id="confirmPassword" class="form-control" [(ngModel)]="confirmPassword" name="confirmPassword" required> 
                  </div>
                  <div class="advertencias" *ngIf="mostrarAdvertencia && confirmPassword!==newPassword">
                    <img src="../assets/images/icons/icon-options/advertencia.png" style="width: 20px; margin-right: 8px;">
                    <p class="m-0">Las contraseñas no coinciden</p>
                  </div>  

                  <div class="modal-footer btn-principal">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                    <button type="button" class="btn btn-danger" (click)="restablecerContrasena()" style="background: #006bb0;">Restablecer</button>
                  </div>
              </form>
          </div>
      </div>
  </div>
</div>
